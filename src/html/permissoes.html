<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <!-- Metadados básicos para responsividade e codificação -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Título da página exibido na aba do navegador -->
    <title>Termos e Permissões</title>

    <!-- Estilos globais e específicos reutilizados da tela de cadastro -->
    <link rel="stylesheet" href="../css/global.css" />
    <link rel="stylesheet" href="../css/cadastro.css" />
</head>

<body>
    <!-- Container principal do conteúdo -->
    <main class="container">
        <h1>Termos de Uso e Permissões</h1>

        <!-- Formulário com validação personalizada e acessibilidade -->
        <form id="form-termos" novalidate aria-describedby="mensagem-erro">

            <!-- Seção: Termos de Uso -->
            <fieldset>
                <legend>Termos de Uso</legend>
                <p>
                    Este app foi desenvolvido com o objetivo de oferecer segurança e acolhimento para mulheres em
                    situações de risco no trajeto e ambiente de trabalho.
                </p>
                <ul>
                    <li>Seus dados são armazenados apenas localmente e utilizados exclusivamente para sua proteção.</li>
                    <li>Você pode excluir suas informações a qualquer momento.</li>
                    <li>Este app é sigiloso, se disfarça automaticamente e respeita sua privacidade.</li>
                    <li>Não substituímos órgãos oficiais de denúncia, mas oferecemos apoio emocional e coleta de provas.
                    </li>
                </ul>
            </fieldset>

            <!-- Seção: Permissões Necessárias -->
            <fieldset>
                <legend>Permissões Necessárias</legend>
                <p>Para que possamos te proteger com eficiência, precisamos de acesso a:</p>

                <!-- Checkboxes com descrição clara para leitores de tela -->
                <label>
                    <input type="checkbox" id="perm-loc" required aria-required="true" />
                    Localização em tempo real para rotas seguras e envio de alertas
                </label>

                <label>
                    <input type="checkbox" id="perm-mic" required aria-required="true" />
                    Microfone para gravação discreta de provas em situações de emergência
                </label>

                <label>
                    <input type="checkbox" id="perm-not" required aria-required="true" />
                    Notificações para alertas de risco e lembretes sobre trajeto
                </label>

                <label class="termos">
                    <input type="checkbox" id="perm-termos" required aria-required="true" />
                    Li e concordo com os termos de uso e as permissões acima
                </label>
            </fieldset>

            <!-- Botão de submissão com foco em acessibilidade -->
            <button type="submit" aria-label="Aceitar termos e ir para login">Aceitar e continuar</button>

            <!-- Mensagem de erro visível para leitores de tela -->
            <p class="mensagem-erro" id="mensagem-erro" aria-live="assertive"></p>
        </form>
    </main>

    <!-- Script com a lógica de validação do formulário -->
    <script>
        const form = document.getElementById("form-termos");
        const erro = document.getElementById("mensagem-erro");

        form.addEventListener("submit", function (e) {
            e.preventDefault();
            erro.textContent = "";

            const checkboxes = [
                document.getElementById("perm-loc"),
                document.getElementById("perm-mic"),
                document.getElementById("perm-not"),
                document.getElementById("perm-termos")
            ];

            const todosMarcados = checkboxes.every(cb => cb.checked);

            if (!todosMarcados) {
                erro.textContent = "Por favor, aceite todos os termos e permissões para continuar com segurança.";
                return;
            }

            window.location.href = "login.html";
        });
    </script>

    <!-- Plugin de acessibilidade VLibras -->
    <div vw class="enabled">
        <div vw-access-button class="active" aria-label="Ativar tradução em Libras"></div>
        <div vw-plugin-wrapper>
            <div class="vw-plugin-top-wrapper"></div>
        </div>
    </div>

    <!-- Script oficial do VLibras -->
    <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
    <script>
        new window.VLibras.Widget('https://vlibras.gov.br/app');
    </script>
</body>

</html>